components:

  - id: brol
    statuses:
      - id: stopped
        cmd:
          type: ILocalCommand
          work_dir: /usr/local/archive/projects/Brrr/BroL
          command: foreman stop brol
      - id: starting  # TODO: Remove starting
        cmd:
          type: ILocalCommand
          work_dir: /usr/local/archive/projects/Brrr/BroL
          command: ""
      - id: started
        cmd:
          type: IRemoteCommand
          work_dir: /usr/local/archive/projects/Brrr/BroL
          user: lmolr
          host: 127.0.0.1
          port: 22
          command: "foreman start brol"
    dependencies: []

  - id: reader
    statuses:
      - id: stopped
        cmd:
          type: ILocalCommand
          work_dir: /usr/local/archive/projects/Brrr/BrrrSRV
          command: foreman stop reader
      - id: started
        cmd:
          type: ILocalCommand
          work_dir: /usr/local/archive/projects/Brrr/BrrrSRV
          command: foreman stop reader
    dependencies:
      - component: brol
        status: started

  - id: pusher
    statuses:
      - id: stopped
        cmd:
          type: ILocalCommand
          work_dir: /usr/local/archive/projects/Brrr/BrrrSRV
          command: foreman stop reader
      - id: started
        cmd:
          type: ILocalCommand
          work_dir: /usr/local/archive/projects/Brrr/BrrrSRV
          command: foreman start reader
    dependencies:
      - component: reader
        status: started


statuses:
  - id: starting
  - id: started
  - id: stopped
